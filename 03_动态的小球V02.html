<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>动态的小球V01</title>
</head>
<body>
<canvas id="canvas" width="500px" height="500px" style="border: 1px solid black"></canvas>
<script>
    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");

    /*
      TODO HTML5中提供了真正的动画方法
      TODO * 动画方法的原理与setTimeout()类似
      TODO window.requestAnimationFrame()
      TODO * 火狐浏览器 - window.mozrequestAnimationFrame
      TODO * Chrome浏览器 - window.webkitrequestAnimationFrame
      TODO * IE浏览器 - window.msrequestAnimationFrame
     */
    var requestAnimationFrame = window.requestAnimationFrame || window.mozrequestAnimationFrame || window.webkitrequestAnimationFrame || window.msrequestAnimationFrame;

    context.fillStyle = "green";

    var y = 250,alpha = 1;

    (function move(){
        //TODO 1.清空画布所有内容
        context.clearRect(0,0,canvas.width,canvas.height);
        //TODO 设置透明度(0~1)
        context.globalAlpha = alpha;
        //TODO 2.进行新的绘制
        context.beginPath();
        context.arc(250,y,10,0,Math.PI*2);
        context.fill();
        //TODO 判断小球是否移出画布
        if(y <= -10){
            cancelRequestAnimationFrame(t);
        }

        //TODO 3.改变坐标值和透明度
        y--;
        alpha -= 0.005;

        var t = requestAnimationFrame(move);
    })();

</script>
</body>
</html>